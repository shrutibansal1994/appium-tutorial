'use strict';

var _defineProperty = require('babel-runtime/helpers/define-property')['default'];

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _ = require('../../..');

var _2 = _interopRequireDefault(_);

var _libCommandsGeneral = require('../../../lib/commands/general');

var _libAndroidHelpers = require('../../../lib/android-helpers');

var _libAndroidHelpers2 = _interopRequireDefault(_libAndroidHelpers);

var _appiumTestSupport = require('appium-test-support');

var _appiumSupport = require('appium-support');

var _appiumAndroidBootstrap = require('appium-android-bootstrap');

var _appiumAndroidBootstrap2 = _interopRequireDefault(_appiumAndroidBootstrap);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _appiumAdb = require('appium-adb');

var _appiumAdb2 = _interopRequireDefault(_appiumAdb);

var _momentTimezone = require('moment-timezone');

var _momentTimezone2 = _interopRequireDefault(_momentTimezone);

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

var driver = undefined;
var sandbox = _sinon2['default'].createSandbox();
var expect = _chai2['default'].expect;

describe('General', function () {
  beforeEach(function () {
    driver = new _2['default']();
    driver.bootstrap = new _appiumAndroidBootstrap2['default']();
    driver.adb = new _appiumAdb2['default']();
    driver.caps = {};
    driver.opts = {};
  });
  afterEach(function () {
    sandbox.restore();
  });
  describe('keys', function () {
    it('should send keys via setText bootstrap command', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            driver.opts.unicodeKeyboard = true;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.keys('keys'));

          case 4:
            driver.bootstrap.sendAction.calledWithExactly('setText', { text: 'keys', replace: false, unicodeKeyboard: true }).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should join keys if keys is array', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            driver.opts.unicodeKeyboard = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.keys(['k', 'e', 'y', 's']));

          case 4:
            driver.bootstrap.sendAction.calledWithExactly('setText', { text: 'keys', replace: false }).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getDeviceTime', function () {
    beforeEach(function () {
      _momentTimezone2['default'].tz.setDefault('Atlantic/Reykjavik');
    });
    afterEach(function () {
      _momentTimezone2['default'].tz.setDefault();
    });
    it('should return device time', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'shell');
            driver.adb.shell.returns(' 2018-06-09T16:21:54+0900 ');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.getDeviceTime().should.become('2018-06-09T07:21:54+00:00'));

          case 4:
            driver.adb.shell.calledWithExactly(['date', '+%Y-%m-%dT%T%z']).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return device time with custom format', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'shell');
            driver.adb.shell.returns(' 2018-06-09T16:21:54+0900 ');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.getDeviceTime('YYYY-MM-DD').should.become('2018-06-09'));

          case 4:
            driver.adb.shell.calledWithExactly(['date', '+%Y-%m-%dT%T%z']).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw error if shell command failed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'shell').throws();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDeviceTime().should.be.rejected);

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw error if format is not string', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'shell').throws();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDeviceTime({}).should.be.rejectedWith(/The format specifier is expected to be a valid string specifier/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getPageSource', function () {
    it('should return page source', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction').withArgs('source').returns('sources');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getPageSource());

          case 3:
            context$3$0.sent.should.be.equal('sources');

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('back', function () {
    it('should press back', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.back());

          case 3:
            driver.bootstrap.sendAction.calledWithExactly('pressBack').should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('isKeyboardShown', function () {
    it('should return true if the keyboard is shown', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: true };
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isKeyboardShown());

          case 3:
            context$3$0.sent.should.equal(true);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return false if the keyboard is not shown', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: false, canCloseKeyboard: true };
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isKeyboardShown());

          case 3:
            context$3$0.sent.should.equal(false);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('hideKeyboard', function () {
    it('should hide keyboard via back command', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'back');
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: true };
            };
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.hideKeyboard());

          case 4:
            driver.back.calledOnce.should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not call back command if can\'t close keyboard', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'back');
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: false };
            };
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.hideKeyboard());

          case 4:
            driver.back.notCalled.should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error if no keyboard is present', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return false;
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.hideKeyboard().should.be.rejectedWith(/not present/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('openSettingsActivity', function () {
    it('should open settings activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: 'pkg', appActivity: 'act' });
            sandbox.stub(driver.adb, 'shell');
            sandbox.stub(driver.adb, 'waitForNotActivity');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.openSettingsActivity('set1'));

          case 5:
            driver.adb.shell.calledWithExactly(['am', 'start', '-a', 'android.settings.set1']).should.be['true'];
            driver.adb.waitForNotActivity.calledWithExactly('pkg', 'act', 5000).should.be['true'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getWindowSize', function () {
    it('should get window size', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction').withArgs('getDeviceSize').returns('size');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getWindowSize());

          case 3:
            context$3$0.sent.should.be.equal('size');

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getWindowRect', function () {
    it('should get window size', function callee$2$0() {
      var rect;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction').withArgs('getDeviceSize').returns({ width: 300, height: 400 });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getWindowRect());

          case 3:
            rect = context$3$0.sent;

            rect.width.should.be.equal(300);
            rect.height.should.be.equal(400);
            rect.x.should.be.equal(0);
            rect.y.should.be.equal(0);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getCurrentActivity', function () {
    it('should get current activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appActivity: 'act' });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity().should.eventually.be.equal('act'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getCurrentPackage', function () {
    it('should get current activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: 'pkg' });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage().should.eventually.equal('pkg'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('isAppInstalled', function () {
    it('should return true if app is installed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'isAppInstalled').withArgs('pkg').returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isAppInstalled('pkg'));

          case 3:
            context$3$0.sent.should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('removeApp', function () {
    it('should remove app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'uninstallApk').withArgs('pkg').returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.removeApp('pkg'));

          case 3:
            context$3$0.sent.should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('installApp', function () {
    it('should install app', function callee$2$0() {
      var app;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            app = 'app.apk';

            sandbox.stub(driver.helpers, 'configureApp').withArgs(app, '.apk').returns(app);
            sandbox.stub(_appiumSupport.fs, 'rimraf').returns();
            sandbox.stub(driver.adb, 'install').returns(true);
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.installApp(app));

          case 6:
            driver.helpers.configureApp.calledOnce.should.be['true'];
            _appiumSupport.fs.rimraf.notCalled.should.be['true'];
            driver.adb.install.calledOnce.should.be['true'];

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error if APK does not exist', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.installApp('non/existent/app.apk').should.be.rejectedWith(/does not exist or is not accessible/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('background', function () {
    it('should bring app to background and back', function callee$2$0() {
      var appPackage, appActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            appPackage = 'wpkg';
            appActivity = 'wacv';

            driver.opts = { appPackage: appPackage, appActivity: appActivity, intentAction: 'act',
              intentCategory: 'cat', intentFlags: 'flgs',
              optionalIntentArguments: 'opt' };
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: appPackage, appActivity: appActivity });
            sandbox.stub(_bluebird2['default'], 'delay');
            sandbox.stub(driver.adb, 'startApp');
            sandbox.stub(driver, 'activateApp');
            context$3$0.next = 10;
            return _regeneratorRuntime.awrap(driver.background(10));

          case 10:
            driver.adb.getFocusedPackageAndActivity.calledOnce.should.be['true'];
            driver.adb.goToHome.calledOnce.should.be['true'];
            _bluebird2['default'].delay.calledWithExactly(10000).should.be['true'];
            driver.activateApp.calledWithExactly(appPackage).should.be['true'];
            driver.adb.startApp.notCalled.should.be['true'];

          case 15:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should bring app to background and back if started after session init', function callee$2$0() {
      var appPackage, appActivity, params;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            appPackage = 'newpkg';
            appActivity = 'newacv';

            driver.opts = { appPackage: 'pkg', appActivity: 'acv', intentAction: 'act',
              intentCategory: 'cat', intentFlags: 'flgs',
              optionalIntentArguments: 'opt' };
            params = { pkg: appPackage, activity: appActivity, action: 'act', category: 'cat',
              flags: 'flgs', waitPkg: 'wpkg', waitActivity: 'wacv',
              optionalIntentArguments: 'opt', stopApp: false };

            driver._cachedActivityArgs = _defineProperty({}, appPackage + '/' + appActivity, params);
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: appPackage, appActivity: appActivity });
            sandbox.stub(_bluebird2['default'], 'delay');
            sandbox.stub(driver.adb, 'startApp');
            sandbox.stub(driver, 'activateApp');
            context$3$0.next = 12;
            return _regeneratorRuntime.awrap(driver.background(10));

          case 12:
            driver.adb.getFocusedPackageAndActivity.calledOnce.should.be['true'];
            driver.adb.goToHome.calledOnce.should.be['true'];
            _bluebird2['default'].delay.calledWithExactly(10000).should.be['true'];
            driver.adb.startApp.calledWithExactly(params).should.be['true'];
            driver.activateApp.notCalled.should.be['true'];

          case 17:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should bring app to background and back if waiting for other pkg / activity', function callee$2$0() {
      var appPackage, appActivity, appWaitPackage, appWaitActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            appPackage = 'somepkg';
            appActivity = 'someacv';
            appWaitPackage = 'somewaitpkg';
            appWaitActivity = 'somewaitacv';

            driver.opts = { appPackage: appPackage, appActivity: appActivity, appWaitPackage: appWaitPackage, appWaitActivity: appWaitActivity,
              intentAction: 'act', intentCategory: 'cat',
              intentFlags: 'flgs', optionalIntentArguments: 'opt',
              stopApp: false };
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: appWaitPackage, appActivity: appWaitActivity });
            sandbox.stub(_bluebird2['default'], 'delay');
            sandbox.stub(driver.adb, 'startApp');
            sandbox.stub(driver, 'activateApp');
            context$3$0.next = 12;
            return _regeneratorRuntime.awrap(driver.background(10));

          case 12:
            driver.adb.getFocusedPackageAndActivity.calledOnce.should.be['true'];
            driver.adb.goToHome.calledOnce.should.be['true'];
            _bluebird2['default'].delay.calledWithExactly(10000).should.be['true'];
            driver.activateApp.calledWithExactly(appWaitPackage).should.be['true'];
            driver.adb.startApp.notCalled.should.be['true'];

          case 17:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not bring app back if seconds are negative', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'startApp');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.background(-1));

          case 4:
            driver.adb.goToHome.calledOnce.should.be['true'];
            driver.adb.startApp.notCalled.should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getStrings', (0, _appiumTestSupport.withMocks)({ helpers: _libAndroidHelpers2['default'] }, function (mocks) {
    it('should return app strings', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.bootstrap.sendAction = function () {
              return '';
            };
            mocks.helpers.expects("pushStrings").returns({ test: 'en_value' });
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.getStrings('en'));

          case 4:
            strings = context$3$0.sent;

            strings.test.should.equal('en_value');
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return cached app strings for the specified language', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.getDeviceLanguage = function () {
              return 'en';
            };
            driver.apkStrings.en = { test: 'en_value' };
            driver.apkStrings.fr = { test: 'fr_value' };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getStrings('fr'));

          case 5:
            strings = context$3$0.sent;

            strings.test.should.equal('fr_value');

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return cached app strings for the device language', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.getDeviceLanguage = function () {
              return 'en';
            };
            driver.apkStrings.en = { test: 'en_value' };
            driver.apkStrings.fr = { test: 'fr_value' };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getStrings());

          case 5:
            strings = context$3$0.sent;

            strings.test.should.equal('en_value');

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('launchApp', function () {
    it('should init and start app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'initAUT');
            sandbox.stub(driver, 'startAUT');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.launchApp());

          case 4:
            driver.initAUT.calledOnce.should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('startActivity', function () {
    var params = undefined;
    beforeEach(function () {
      params = { pkg: 'pkg', activity: 'act', waitPkg: 'wpkg', waitActivity: 'wact',
        action: 'act', category: 'cat', flags: 'flgs', optionalIntentArguments: 'opt' };
      sandbox.stub(driver.adb, 'startApp');
    });
    it('should start activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            params.optionalIntentArguments = 'opt';
            params.stopApp = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', 'wpkg', 'wact', 'act', 'cat', 'flgs', 'opt', true));

          case 4:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should use dontStopAppOnReset from opts if it is not passed as param', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.dontStopAppOnReset = true;
            params.stopApp = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', 'wpkg', 'wact', 'act', 'cat', 'flgs', 'opt'));

          case 4:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should use appPackage and appActivity if appWaitPackage and appWaitActivity are undefined', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            params.waitPkg = 'pkg';
            params.waitActivity = 'act';
            params.stopApp = true;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', null, null, 'act', 'cat', 'flgs', 'opt', false));

          case 5:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('reset', function () {
    it('should reset app via reinstall if fullReset is true', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.fullReset = true;
            driver.opts.appPackage = 'pkg';
            sandbox.stub(driver, 'startAUT').returns('aut');
            sandbox.stub(_libAndroidHelpers2['default'], 'resetApp').returns(undefined);
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.reset().should.eventually.be.equal('aut'));

          case 6:
            _libAndroidHelpers2['default'].resetApp.calledWith(driver.adb).should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should do fast reset if fullReset is false', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.fullReset = false;
            driver.opts.appPackage = 'pkg';
            sandbox.stub(_libAndroidHelpers2['default'], 'resetApp').returns(undefined);
            sandbox.stub(driver, 'startAUT').returns('aut');
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.reset().should.eventually.be.equal('aut'));

          case 6:
            _libAndroidHelpers2['default'].resetApp.calledWith(driver.adb).should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];
            expect(driver.curContext).to.eql('NATIVE_APP');

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('startAUT', function () {
    it('should start AUT', function callee$2$0() {
      var params;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = {
              appPackage: 'pkg',
              appActivity: 'act',
              intentAction: 'actn',
              intentCategory: 'cat',
              intentFlags: 'flgs',
              appWaitPackage: 'wpkg',
              appWaitActivity: 'wact',
              appWaitDuration: 'wdur',
              optionalIntentArguments: 'opt',
              userProfile: 1
            };
            params = {
              pkg: 'pkg',
              activity: 'act',
              action: 'actn',
              category: 'cat',
              flags: 'flgs',
              waitPkg: 'wpkg',
              waitActivity: 'wact',
              waitDuration: 'wdur',
              optionalIntentArguments: 'opt',
              stopApp: false,
              user: 1
            };

            driver.opts.dontStopAppOnReset = true;
            params.stopApp = false;
            sandbox.stub(driver.adb, 'startApp');
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(driver.startAUT());

          case 7:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('setUrl', function () {
    it('should set url', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = { appPackage: 'pkg' };
            sandbox.stub(driver.adb, 'startUri');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.setUrl('url'));

          case 4:
            driver.adb.startUri.calledWithExactly('url', 'pkg').should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('closeApp', function () {
    it('should close app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = { appPackage: 'pkg' };
            sandbox.stub(driver.adb, 'forceStop');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.closeApp());

          case 4:
            driver.adb.forceStop.calledWithExactly('pkg').should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getDisplayDensity', function () {
    it('should return the display density of a device', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return '123';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity());

          case 3:
            context$3$0.sent.should.equal(123);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return the display density of an emulator', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function (cmd) {
              var joinedCmd = cmd.join(' ');
              if (joinedCmd.indexOf('ro.sf') !== -1) {
                // device property look up
                return '';
              } else if (joinedCmd.indexOf('qemu.sf') !== -1) {
                // emulator property look up
                return '456';
              }
              return '';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity());

          case 3:
            context$3$0.sent.should.equal(456);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error if the display density property can\'t be found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return '';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity().should.be.rejectedWith(/Failed to get display density property/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw and error if the display density is not a number', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return 'abc';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity().should.be.rejectedWith(/Failed to get display density property/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('parseSurfaceLine', function () {
    it('should return visible true if the surface is visible', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=true rect=1 1 1 1').should.be.eql({
              visible: true,
              x: 1,
              y: 1,
              width: 1,
              height: 1
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return visible false if the surface is not visible', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=false rect=1 1 1 1').should.be.eql({
              visible: false,
              x: 1,
              y: 1,
              width: 1,
              height: 1
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return the parsed surface bounds', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=true rect=(1.0,2.0) 3.0 x 4.0').should.be.eql({
              visible: true,
              x: 1,
              y: 2,
              width: 3,
              height: 4
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });

  // these are used for both parseWindows and getSystemBars tests
  var validWindowOutput = ['  Window #1 Derp', '    stuff', '      Surface: derp shown=false lalalala rect=(9.0,8.0) 7.0 x 6.0', '    more stuff', '  Window #2 StatusBar', '    blah blah blah', '      Surface: blah blah shown=true blah blah rect=(1.0,2.0) 3.0 x 4.0', '    blah blah blah', '  Window #3 NavigationBar', '    womp womp', '      Surface: blah blah shown=false womp womp rect=(5.0,6.0) 50.0 x 60.0', '    qwerty asd zxc'].join('\n');
  var validSystemBars = {
    statusBar: { visible: true, x: 1, y: 2, width: 3, height: 4 },
    navigationBar: { visible: false, x: 5, y: 6, width: 50, height: 60 }
  };

  describe('parseWindows', function () {
    it('should throw an error if the status bar info wasn\'t found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            expect(function () {
              (0, _libCommandsGeneral.parseWindows)('');
            }).to['throw'](Error, /Failed to parse status bar information./);

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error if the navigation bar info wasn\'t found', function callee$2$0() {
      var windowOutput;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            windowOutput = ['  Window #1 StatusBar', '    blah blah blah', '      Surface: blah blah shown=true blah blah rect=(1.0,2.0) 3.0 x 4.0', '    blah blah blah'].join('\n');

            expect(function () {
              (0, _libCommandsGeneral.parseWindows)(windowOutput);
            }).to['throw'](Error, /Failed to parse navigation bar information./);

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return status and navigation bar info when both are given', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseWindows)(validWindowOutput).should.be.eql(validSystemBars);

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getSystemBars', function () {
    it('should throw an error if there\'s no window manager output', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver = new _2['default']();
            driver.adb = {};
            driver.adb.shell = function () {
              return '';
            };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getSystemBars().should.be.rejectedWith(/Did not get window manager output./));

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return the parsed system bar info', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver = new _2['default']();
            driver.adb = {};
            driver.adb.shell = function () {
              return validWindowOutput;
            };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getSystemBars());

          case 5:
            context$3$0.t0 = validSystemBars;
            context$3$0.sent.should.be.eql(context$3$0.t0);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
});
//eslint-disable-line
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9jb21tYW5kcy9nZW5lcmFsLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O29CQUFpQixNQUFNOzs7OzhCQUNJLGtCQUFrQjs7OztxQkFDM0IsT0FBTzs7OztnQkFDQyxVQUFVOzs7O2tDQUNXLCtCQUErQjs7aUNBQzFELDhCQUE4Qjs7OztpQ0FDeEIscUJBQXFCOzs2QkFDNUIsZ0JBQWdCOztzQ0FDYiwwQkFBMEI7Ozs7d0JBQ2xDLFVBQVU7Ozs7eUJBQ1IsWUFBWTs7Ozs4QkFDVCxpQkFBaUI7Ozs7QUFHcEMsa0JBQUssTUFBTSxFQUFFLENBQUM7QUFDZCxrQkFBSyxHQUFHLDZCQUFnQixDQUFDOztBQUV6QixJQUFJLE1BQU0sWUFBQSxDQUFDO0FBQ1gsSUFBSSxPQUFPLEdBQUcsbUJBQU0sYUFBYSxFQUFFLENBQUM7QUFDcEMsSUFBSSxNQUFNLEdBQUcsa0JBQUssTUFBTSxDQUFDOztBQUV6QixRQUFRLENBQUMsU0FBUyxFQUFFLFlBQVk7QUFDOUIsWUFBVSxDQUFDLFlBQVk7QUFDckIsVUFBTSxHQUFHLG1CQUFtQixDQUFDO0FBQzdCLFVBQU0sQ0FBQyxTQUFTLEdBQUcseUNBQWUsQ0FBQztBQUNuQyxVQUFNLENBQUMsR0FBRyxHQUFHLDRCQUFTLENBQUM7QUFDdkIsVUFBTSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7QUFDakIsVUFBTSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7R0FDbEIsQ0FBQyxDQUFDO0FBQ0gsV0FBUyxDQUFDLFlBQVk7QUFDcEIsV0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0dBQ25CLENBQUMsQ0FBQztBQUNILFVBQVEsQ0FBQyxNQUFNLEVBQUUsWUFBWTtBQUMzQixNQUFFLENBQUMsZ0RBQWdELEVBQUU7Ozs7QUFDbkQsbUJBQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUM3QyxrQkFBTSxDQUFDLElBQUksQ0FBQyxlQUFl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QkFBaUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDOzs7Ozs7O0tBQ2hFLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztBQUNILFVBQVEsQ0FBQyxlQUFlLEVBQUUsWUFBWTtBQUNwQyxNQUFFLENBQUMsNERBQTRELEVBQUU7Ozs7QUFDL0Qsa0JBQU0sR0FBRyxtQkFBbUIsQ0FBQztBQUM3QixrQkFBTSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUM7QUFDaEIsa0JBQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLFlBQU07QUFBRSxxQkFBTyxFQUFFLENBQUM7YUFBRSxDQUFDOzs2Q0FDbEMsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLG9DQUFvQyxDQUFDOzs7Ozs7O0tBQzFGLENBQUMsQ0FBQztBQUNILE1BQUUsQ0FBQywwQ0FBMEMsRUFBRTs7OztBQUM3QyxrQkFBTSxHQUFHLG1CQUFtQixDQUFDO0FBQzdCLGtCQUFNLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUNoQixrQkFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsWUFBTTtBQUFFLHFCQUFPLGlCQUFpQixDQUFDO2FBQUUsQ0FBQzs7NkNBQ2hELE1BQU0sQ0FBQyxhQUFhLEVBQUU7Ozs2QkFBZ0IsZUFBZTs2QkFBN0IsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHOzs7Ozs7O0tBQzdDLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L3VuaXQvY29tbWFuZHMvZ2VuZXJhbC1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcbmltcG9ydCBBbmRyb2lkRHJpdmVyIGZyb20gJy4uLy4uLy4uJztcbmltcG9ydCB7IHBhcnNlU3VyZmFjZUxpbmUsIHBhcnNlV2luZG93cyB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb21tYW5kcy9nZW5lcmFsJztcbmltcG9ydCBoZWxwZXJzIGZyb20gJy4uLy4uLy4uL2xpYi9hbmRyb2lkLWhlbHBlcnMnO1xuaW1wb3J0IHsgd2l0aE1vY2tzIH0gZnJvbSAnYXBwaXVtLXRlc3Qtc3VwcG9ydCc7XG5pbXBvcnQgeyBmcyB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcbmltcG9ydCBCb290c3RyYXAgZnJvbSAnYXBwaXVtLWFuZHJvaWQtYm9vdHN0cmFwJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBBREIgZnJvbSAnYXBwaXVtLWFkYic7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudC10aW1lem9uZSc7XG5cblxuY2hhaS5zaG91bGQoKTtcbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxubGV0IGRyaXZlcjtcbmxldCBzYW5kYm94ID0gc2lub24uY3JlYXRlU2FuZGJveCgpO1xubGV0IGV4cGVjdCA9IGNoYWkuZXhwZWN0O1xuXG5kZXNjcmliZSgnR2VuZXJhbCcsIGZ1bmN0aW9uICgpIHtcbiAgYmVmb3JlRWFjaChmdW5jdGlvbiAoKSB7XG4gICAgZHJpdmVyID0gbmV3IEFuZHJvaWREcml2ZXIoKTtcbiAgICBkcml2ZXIuYm9vdHN0cmFwID0gbmV3IEJvb3RzdHJhcCgpO1xuICAgIGRyaXZlci5hZGIgPSBuZXcgQURCKCk7XG4gICAgZHJpdmVyLmNhcHMgPSB7fTtcbiAgICBkcml2ZXIub3B0cyA9IHt9O1xuICB9KTtcbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBzYW5kYm94LnJlc3RvcmUoKTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdrZXlzJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgc2VuZCBrZXlzIHZpYSBzZXRUZXh0IGJvb3RzdHJhcCBjb21tYW5kJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5ib290c3RyYXAsICdzZW5kQWN0aW9uJyk7XG4gICAgICBkcml2ZXIub3B0cy51bmljb2RlS2V5Ym9hcmQgPSB0cnVlO1xuICAgICAgYXdhaXQgZHJpdmVyLmtleXMoJ2tleXMnKTtcbiAgICAgIGRyaXZlci5ib290c3RyYXAuc2VuZEFjdGlvblxuICAgICAgICAuY2FsbGVkV2l0aEV4YWN0bHkoJ3NldFRleHQnLFxuICAgICAgICAgIHt0ZXh0OiAna2V5cycsIHJlcGxhY2U6IGZhbHNlLCB1bmljb2RlS2V5Ym9hcmQ6IHRydWV9KVxuICAgICAgICAuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBqb2luIGtleXMgaWYga2V5cyBpcyBhcnJheScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYm9vdHN0cmFwLCAnc2VuZEFjdGlvbicpO1xuICAgICAgZHJpdmVyLm9wdHMudW5pY29kZUtleWJvYXJkID0gZmFsc2U7XG4gICAgICBhd2FpdCBkcml2ZXIua2V5cyhbJ2snLCAnZScsICd5JywgJ3MnXSk7XG4gICAgICBkcml2ZXIuYm9vdHN0cmFwLnNlbmRBY3Rpb25cbiAgICAgICAgLmNhbGxlZFdpdGhFeGFjdGx5KCdzZXRUZXh0Jywge3RleHQ6ICdrZXlzJywgcmVwbGFjZTogZmFsc2V9KVxuICAgICAgICAuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0RGV2aWNlVGltZScsIGZ1bmN0aW9uICgpIHtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vbWVudC50ei5zZXREZWZhdWx0KCdBdGxhbnRpYy9SZXlramF2aWsnKTtcbiAgICB9KTtcbiAgICBhZnRlckVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgbW9tZW50LnR6LnNldERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBkZXZpY2UgdGltZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc2hlbGwnKTtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwucmV0dXJucygnIDIwMTgtMDYtMDlUMTY6MjE6NTQrMDkwMCAnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXREZXZpY2VUaW1lKCkuc2hvdWxkLmJlY29tZSgnMjAxOC0wNi0wOVQwNzoyMTo1NCswMDowMCcpO1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbC5jYWxsZWRXaXRoRXhhY3RseShbJ2RhdGUnLCAnKyVZLSVtLSVkVCVUJXonXSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZGV2aWNlIHRpbWUgd2l0aCBjdXN0b20gZm9ybWF0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzaGVsbCcpO1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbC5yZXR1cm5zKCcgMjAxOC0wNi0wOVQxNjoyMTo1NCswOTAwICcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmdldERldmljZVRpbWUoJ1lZWVktTU0tREQnKS5zaG91bGQuYmVjb21lKCcyMDE4LTA2LTA5Jyk7XG4gICAgICBkcml2ZXIuYWRiLnNoZWxsLmNhbGxlZFdpdGhFeGFjdGx5KFsnZGF0ZScsICcrJVktJW0tJWRUJVQleiddKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGlmIHNoZWxsIGNvbW1hbmQgZmFpbGVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzaGVsbCcpLnRocm93cygpO1xuICAgICAgYXdhaXQgZHJpdmVyLmdldERldmljZVRpbWUoKS5zaG91bGQuYmUucmVqZWN0ZWQ7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBpZiBmb3JtYXQgaXMgbm90IHN0cmluZycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc2hlbGwnKS50aHJvd3MoKTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXREZXZpY2VUaW1lKHt9KS5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKFxuICAgICAgICAvVGhlIGZvcm1hdCBzcGVjaWZpZXIgaXMgZXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBzdHJpbmcgc3BlY2lmaWVyL1xuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRQYWdlU291cmNlJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBhZ2Ugc291cmNlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5ib290c3RyYXAsICdzZW5kQWN0aW9uJykud2l0aEFyZ3MoJ3NvdXJjZScpLnJldHVybnMoJ3NvdXJjZXMnKTtcbiAgICAgIChhd2FpdCBkcml2ZXIuZ2V0UGFnZVNvdXJjZSgpKS5zaG91bGQuYmUuZXF1YWwoJ3NvdXJjZXMnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdiYWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgcHJlc3MgYmFjaycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYm9vdHN0cmFwLCAnc2VuZEFjdGlvbicpO1xuICAgICAgYXdhaXQgZHJpdmVyLmJhY2soKTtcbiAgICAgIGRyaXZlci5ib290c3RyYXAuc2VuZEFjdGlvbi5jYWxsZWRXaXRoRXhhY3RseSgncHJlc3NCYWNrJykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnaXNLZXlib2FyZFNob3duJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgaWYgdGhlIGtleWJvYXJkIGlzIHNob3duJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmFkYi5pc1NvZnRLZXlib2FyZFByZXNlbnQgPSAoKSA9PiB7IHJldHVybiB7aXNLZXlib2FyZFNob3duOiB0cnVlLCBjYW5DbG9zZUtleWJvYXJkOiB0cnVlfTsgfTtcbiAgICAgIChhd2FpdCBkcml2ZXIuaXNLZXlib2FyZFNob3duKCkpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBpZiB0aGUga2V5Ym9hcmQgaXMgbm90IHNob3duJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmFkYi5pc1NvZnRLZXlib2FyZFByZXNlbnQgPSAoKSA9PiB7IHJldHVybiB7aXNLZXlib2FyZFNob3duOiBmYWxzZSwgY2FuQ2xvc2VLZXlib2FyZDogdHJ1ZX07IH07XG4gICAgICAoYXdhaXQgZHJpdmVyLmlzS2V5Ym9hcmRTaG93bigpKS5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2hpZGVLZXlib2FyZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIGhpZGUga2V5Ym9hcmQgdmlhIGJhY2sgY29tbWFuZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdiYWNrJyk7XG4gICAgICBkcml2ZXIuYWRiLmlzU29mdEtleWJvYXJkUHJlc2VudCA9ICgpID0+IHsgcmV0dXJuIHtpc0tleWJvYXJkU2hvd246IHRydWUsIGNhbkNsb3NlS2V5Ym9hcmQ6IHRydWV9OyB9O1xuICAgICAgYXdhaXQgZHJpdmVyLmhpZGVLZXlib2FyZCgpO1xuICAgICAgZHJpdmVyLmJhY2suY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBjYWxsIGJhY2sgY29tbWFuZCBpZiBjYW5cXCd0IGNsb3NlIGtleWJvYXJkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2JhY2snKTtcbiAgICAgIGRyaXZlci5hZGIuaXNTb2Z0S2V5Ym9hcmRQcmVzZW50ID0gKCkgPT4geyByZXR1cm4ge2lzS2V5Ym9hcmRTaG93bjogdHJ1ZSwgY2FuQ2xvc2VLZXlib2FyZDogZmFsc2V9OyB9O1xuICAgICAgYXdhaXQgZHJpdmVyLmhpZGVLZXlib2FyZCgpO1xuICAgICAgZHJpdmVyLmJhY2subm90Q2FsbGVkLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgbm8ga2V5Ym9hcmQgaXMgcHJlc2VudCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuaXNTb2Z0S2V5Ym9hcmRQcmVzZW50ID0gKCkgPT4geyByZXR1cm4gZmFsc2U7IH07XG4gICAgICBhd2FpdCBkcml2ZXIuaGlkZUtleWJvYXJkKCkuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvbm90IHByZXNlbnQvKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdvcGVuU2V0dGluZ3NBY3Rpdml0eScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIG9wZW4gc2V0dGluZ3MgYWN0aXZpdHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHknKVxuICAgICAgICAucmV0dXJucyh7YXBwUGFja2FnZTogJ3BrZycsIGFwcEFjdGl2aXR5OiAnYWN0J30pO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzaGVsbCcpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICd3YWl0Rm9yTm90QWN0aXZpdHknKTtcbiAgICAgIGF3YWl0IGRyaXZlci5vcGVuU2V0dGluZ3NBY3Rpdml0eSgnc2V0MScpO1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbC5jYWxsZWRXaXRoRXhhY3RseShbJ2FtJywgJ3N0YXJ0JywgJy1hJywgJ2FuZHJvaWQuc2V0dGluZ3Muc2V0MSddKVxuICAgICAgICAuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLndhaXRGb3JOb3RBY3Rpdml0eS5jYWxsZWRXaXRoRXhhY3RseSgncGtnJywgJ2FjdCcsIDUwMDApXG4gICAgICAgIC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRXaW5kb3dTaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgZ2V0IHdpbmRvdyBzaXplJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5ib290c3RyYXAsICdzZW5kQWN0aW9uJylcbiAgICAgICAgLndpdGhBcmdzKCdnZXREZXZpY2VTaXplJykucmV0dXJucygnc2l6ZScpO1xuICAgICAgKGF3YWl0IGRyaXZlci5nZXRXaW5kb3dTaXplKCkpLnNob3VsZC5iZS5lcXVhbCgnc2l6ZScpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldFdpbmRvd1JlY3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgd2luZG93IHNpemUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmJvb3RzdHJhcCwgJ3NlbmRBY3Rpb24nKVxuICAgICAgICAud2l0aEFyZ3MoJ2dldERldmljZVNpemUnKS5yZXR1cm5zKHt3aWR0aDogMzAwLCBoZWlnaHQ6IDQwMH0pO1xuICAgICAgY29uc3QgcmVjdCA9IGF3YWl0IGRyaXZlci5nZXRXaW5kb3dSZWN0KCk7XG4gICAgICByZWN0LndpZHRoLnNob3VsZC5iZS5lcXVhbCgzMDApO1xuICAgICAgcmVjdC5oZWlnaHQuc2hvdWxkLmJlLmVxdWFsKDQwMCk7XG4gICAgICByZWN0Lnguc2hvdWxkLmJlLmVxdWFsKDApO1xuICAgICAgcmVjdC55LnNob3VsZC5iZS5lcXVhbCgwKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRDdXJyZW50QWN0aXZpdHknLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCBhY3Rpdml0eScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eScpXG4gICAgICAgIC5yZXR1cm5zKHthcHBBY3Rpdml0eTogJ2FjdCd9KTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXRDdXJyZW50QWN0aXZpdHkoKS5zaG91bGQuZXZlbnR1YWxseS5iZS5lcXVhbCgnYWN0Jyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0Q3VycmVudFBhY2thZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgY3VycmVudCBhY3Rpdml0eScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eScpXG4gICAgICAgIC5yZXR1cm5zKHthcHBQYWNrYWdlOiAncGtnJ30pO1xuICAgICAgYXdhaXQgZHJpdmVyLmdldEN1cnJlbnRQYWNrYWdlKCkuc2hvdWxkLmV2ZW50dWFsbHkuZXF1YWwoJ3BrZycpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2lzQXBwSW5zdGFsbGVkJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRydWUgaWYgYXBwIGlzIGluc3RhbGxlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnaXNBcHBJbnN0YWxsZWQnKS53aXRoQXJncygncGtnJykucmV0dXJucyh0cnVlKTtcbiAgICAgIChhd2FpdCBkcml2ZXIuaXNBcHBJbnN0YWxsZWQoJ3BrZycpKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdyZW1vdmVBcHAnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCByZW1vdmUgYXBwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICd1bmluc3RhbGxBcGsnKS53aXRoQXJncygncGtnJykucmV0dXJucyh0cnVlKTtcbiAgICAgIChhd2FpdCBkcml2ZXIucmVtb3ZlQXBwKCdwa2cnKSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnaW5zdGFsbEFwcCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIGluc3RhbGwgYXBwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGFwcCA9ICdhcHAuYXBrJztcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuaGVscGVycywgJ2NvbmZpZ3VyZUFwcCcpLndpdGhBcmdzKGFwcCwgJy5hcGsnKVxuICAgICAgICAucmV0dXJucyhhcHApO1xuICAgICAgc2FuZGJveC5zdHViKGZzLCAncmltcmFmJykucmV0dXJucygpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdpbnN0YWxsJykucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGRyaXZlci5pbnN0YWxsQXBwKGFwcCk7XG4gICAgICBkcml2ZXIuaGVscGVycy5jb25maWd1cmVBcHAuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGZzLnJpbXJhZi5ub3RDYWxsZWQuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLmluc3RhbGwuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIEFQSyBkb2VzIG5vdCBleGlzdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGRyaXZlci5pbnN0YWxsQXBwKCdub24vZXhpc3RlbnQvYXBwLmFwaycpLnNob3VsZC5iZVxuICAgICAgICAucmVqZWN0ZWRXaXRoKC9kb2VzIG5vdCBleGlzdCBvciBpcyBub3QgYWNjZXNzaWJsZS8pO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2JhY2tncm91bmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBicmluZyBhcHAgdG8gYmFja2dyb3VuZCBhbmQgYmFjaycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGFwcFBhY2thZ2UgPSAnd3BrZyc7XG4gICAgICBjb25zdCBhcHBBY3Rpdml0eSA9ICd3YWN2JztcbiAgICAgIGRyaXZlci5vcHRzID0ge2FwcFBhY2thZ2UsIGFwcEFjdGl2aXR5LCBpbnRlbnRBY3Rpb246ICdhY3QnLFxuICAgICAgICAgICAgICAgICAgICAgaW50ZW50Q2F0ZWdvcnk6ICdjYXQnLCBpbnRlbnRGbGFnczogJ2ZsZ3MnLFxuICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxJbnRlbnRBcmd1bWVudHM6ICdvcHQnfTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ29Ub0hvbWUnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eScpXG4gICAgICAgIC5yZXR1cm5zKHthcHBQYWNrYWdlLCBhcHBBY3Rpdml0eX0pO1xuICAgICAgc2FuZGJveC5zdHViKEIsICdkZWxheScpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdGFydEFwcCcpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2FjdGl2YXRlQXBwJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuYmFja2dyb3VuZCgxMCk7XG4gICAgICBkcml2ZXIuYWRiLmdldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHkuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hZGIuZ29Ub0hvbWUuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIEIuZGVsYXkuY2FsbGVkV2l0aEV4YWN0bHkoMTAwMDApLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFjdGl2YXRlQXBwLmNhbGxlZFdpdGhFeGFjdGx5KGFwcFBhY2thZ2UpLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFkYi5zdGFydEFwcC5ub3RDYWxsZWQuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBicmluZyBhcHAgdG8gYmFja2dyb3VuZCBhbmQgYmFjayBpZiBzdGFydGVkIGFmdGVyIHNlc3Npb24gaW5pdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGFwcFBhY2thZ2UgPSAnbmV3cGtnJztcbiAgICAgIGNvbnN0IGFwcEFjdGl2aXR5ID0gJ25ld2Fjdic7XG4gICAgICBkcml2ZXIub3B0cyA9IHthcHBQYWNrYWdlOiAncGtnJywgYXBwQWN0aXZpdHk6ICdhY3YnLCBpbnRlbnRBY3Rpb246ICdhY3QnLFxuICAgICAgICAgICAgICAgICAgICAgaW50ZW50Q2F0ZWdvcnk6ICdjYXQnLCBpbnRlbnRGbGFnczogJ2ZsZ3MnLFxuICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxJbnRlbnRBcmd1bWVudHM6ICdvcHQnfTtcbiAgICAgIGxldCBwYXJhbXMgPSB7cGtnOiBhcHBQYWNrYWdlLCBhY3Rpdml0eTogYXBwQWN0aXZpdHksIGFjdGlvbjogJ2FjdCcsIGNhdGVnb3J5OiAnY2F0JyxcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3M6ICdmbGdzJywgd2FpdFBrZzogJ3dwa2cnLCB3YWl0QWN0aXZpdHk6ICd3YWN2JyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxJbnRlbnRBcmd1bWVudHM6ICdvcHQnLCBzdG9wQXBwOiBmYWxzZX07XG4gICAgICBkcml2ZXIuX2NhY2hlZEFjdGl2aXR5QXJncyA9IHtbYCR7YXBwUGFja2FnZX0vJHthcHBBY3Rpdml0eX1gXTogcGFyYW1zfTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ29Ub0hvbWUnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eScpXG4gICAgICAgIC5yZXR1cm5zKHthcHBQYWNrYWdlLCBhcHBBY3Rpdml0eX0pO1xuICAgICAgc2FuZGJveC5zdHViKEIsICdkZWxheScpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdGFydEFwcCcpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2FjdGl2YXRlQXBwJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuYmFja2dyb3VuZCgxMCk7XG4gICAgICBkcml2ZXIuYWRiLmdldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHkuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hZGIuZ29Ub0hvbWUuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIEIuZGVsYXkuY2FsbGVkV2l0aEV4YWN0bHkoMTAwMDApLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFkYi5zdGFydEFwcC5jYWxsZWRXaXRoRXhhY3RseShwYXJhbXMpLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFjdGl2YXRlQXBwLm5vdENhbGxlZC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJyaW5nIGFwcCB0byBiYWNrZ3JvdW5kIGFuZCBiYWNrIGlmIHdhaXRpbmcgZm9yIG90aGVyIHBrZyAvIGFjdGl2aXR5JywgYXN5bmMgZnVuY3Rpb24gKCkgeyAvL2VzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGNvbnN0IGFwcFBhY2thZ2UgPSAnc29tZXBrZyc7XG4gICAgICBjb25zdCBhcHBBY3Rpdml0eSA9ICdzb21lYWN2JztcbiAgICAgIGNvbnN0IGFwcFdhaXRQYWNrYWdlID0gJ3NvbWV3YWl0cGtnJztcbiAgICAgIGNvbnN0IGFwcFdhaXRBY3Rpdml0eSA9ICdzb21ld2FpdGFjdic7XG4gICAgICBkcml2ZXIub3B0cyA9IHthcHBQYWNrYWdlLCBhcHBBY3Rpdml0eSwgYXBwV2FpdFBhY2thZ2UsIGFwcFdhaXRBY3Rpdml0eSxcbiAgICAgICAgICAgICAgICAgICAgIGludGVudEFjdGlvbjogJ2FjdCcsIGludGVudENhdGVnb3J5OiAnY2F0JyxcbiAgICAgICAgICAgICAgICAgICAgIGludGVudEZsYWdzOiAnZmxncycsIG9wdGlvbmFsSW50ZW50QXJndW1lbnRzOiAnb3B0JyxcbiAgICAgICAgICAgICAgICAgICAgIHN0b3BBcHA6IGZhbHNlfTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ29Ub0hvbWUnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eScpXG4gICAgICAgIC5yZXR1cm5zKHthcHBQYWNrYWdlOiBhcHBXYWl0UGFja2FnZSwgYXBwQWN0aXZpdHk6IGFwcFdhaXRBY3Rpdml0eX0pO1xuICAgICAgc2FuZGJveC5zdHViKEIsICdkZWxheScpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdGFydEFwcCcpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2FjdGl2YXRlQXBwJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuYmFja2dyb3VuZCgxMCk7XG4gICAgICBkcml2ZXIuYWRiLmdldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHkuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hZGIuZ29Ub0hvbWUuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIEIuZGVsYXkuY2FsbGVkV2l0aEV4YWN0bHkoMTAwMDApLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFjdGl2YXRlQXBwLmNhbGxlZFdpdGhFeGFjdGx5KGFwcFdhaXRQYWNrYWdlKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAubm90Q2FsbGVkLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IGJyaW5nIGFwcCBiYWNrIGlmIHNlY29uZHMgYXJlIG5lZ2F0aXZlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdnb1RvSG9tZScpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdGFydEFwcCcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmJhY2tncm91bmQoLTEpO1xuICAgICAgZHJpdmVyLmFkYi5nb1RvSG9tZS5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFkYi5zdGFydEFwcC5ub3RDYWxsZWQuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0U3RyaW5ncycsIHdpdGhNb2Nrcyh7aGVscGVyc30sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGFwcCBzdHJpbmdzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmJvb3RzdHJhcC5zZW5kQWN0aW9uID0gKCkgPT4geyByZXR1cm4gJyc7IH07XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoXCJwdXNoU3RyaW5nc1wiKVxuICAgICAgICAgIC5yZXR1cm5zKHt0ZXN0OiAnZW5fdmFsdWUnfSk7XG4gICAgICBsZXQgc3RyaW5ncyA9IGF3YWl0IGRyaXZlci5nZXRTdHJpbmdzKCdlbicpO1xuICAgICAgc3RyaW5ncy50ZXN0LnNob3VsZC5lcXVhbCgnZW5fdmFsdWUnKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY2FjaGVkIGFwcCBzdHJpbmdzIGZvciB0aGUgc3BlY2lmaWVkIGxhbmd1YWdlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmFkYi5nZXREZXZpY2VMYW5ndWFnZSA9ICgpID0+IHsgcmV0dXJuICdlbic7IH07XG4gICAgICBkcml2ZXIuYXBrU3RyaW5ncy5lbiA9IHt0ZXN0OiAnZW5fdmFsdWUnfTtcbiAgICAgIGRyaXZlci5hcGtTdHJpbmdzLmZyID0ge3Rlc3Q6ICdmcl92YWx1ZSd9O1xuICAgICAgbGV0IHN0cmluZ3MgPSBhd2FpdCBkcml2ZXIuZ2V0U3RyaW5ncygnZnInKTtcbiAgICAgIHN0cmluZ3MudGVzdC5zaG91bGQuZXF1YWwoJ2ZyX3ZhbHVlJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY2FjaGVkIGFwcCBzdHJpbmdzIGZvciB0aGUgZGV2aWNlIGxhbmd1YWdlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmFkYi5nZXREZXZpY2VMYW5ndWFnZSA9ICgpID0+IHsgcmV0dXJuICdlbic7IH07XG4gICAgICBkcml2ZXIuYXBrU3RyaW5ncy5lbiA9IHt0ZXN0OiAnZW5fdmFsdWUnfTtcbiAgICAgIGRyaXZlci5hcGtTdHJpbmdzLmZyID0ge3Rlc3Q6ICdmcl92YWx1ZSd9O1xuICAgICAgbGV0IHN0cmluZ3MgPSBhd2FpdCBkcml2ZXIuZ2V0U3RyaW5ncygpO1xuICAgICAgc3RyaW5ncy50ZXN0LnNob3VsZC5lcXVhbCgnZW5fdmFsdWUnKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnbGF1bmNoQXBwJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgaW5pdCBhbmQgc3RhcnQgYXBwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2luaXRBVVQnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdzdGFydEFVVCcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmxhdW5jaEFwcCgpO1xuICAgICAgZHJpdmVyLmluaXRBVVQuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5zdGFydEFVVC5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3N0YXJ0QWN0aXZpdHknLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHBhcmFtcztcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHBhcmFtcyA9IHtwa2c6ICdwa2cnLCBhY3Rpdml0eTogJ2FjdCcsIHdhaXRQa2c6ICd3cGtnJywgd2FpdEFjdGl2aXR5OiAnd2FjdCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnYWN0JywgY2F0ZWdvcnk6ICdjYXQnLCBmbGFnczogJ2ZsZ3MnLCBvcHRpb25hbEludGVudEFyZ3VtZW50czogJ29wdCd9O1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdGFydEFwcCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgc3RhcnQgYWN0aXZpdHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBwYXJhbXMub3B0aW9uYWxJbnRlbnRBcmd1bWVudHMgPSAnb3B0JztcbiAgICAgIHBhcmFtcy5zdG9wQXBwID0gZmFsc2U7XG4gICAgICBhd2FpdCBkcml2ZXIuc3RhcnRBY3Rpdml0eSgncGtnJywgJ2FjdCcsICd3cGtnJywgJ3dhY3QnLCAnYWN0JyxcbiAgICAgICAgJ2NhdCcsICdmbGdzJywgJ29wdCcsIHRydWUpO1xuICAgICAgZHJpdmVyLmFkYi5zdGFydEFwcC5jYWxsZWRXaXRoRXhhY3RseShwYXJhbXMpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdXNlIGRvbnRTdG9wQXBwT25SZXNldCBmcm9tIG9wdHMgaWYgaXQgaXMgbm90IHBhc3NlZCBhcyBwYXJhbScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5vcHRzLmRvbnRTdG9wQXBwT25SZXNldCA9IHRydWU7XG4gICAgICBwYXJhbXMuc3RvcEFwcCA9IGZhbHNlO1xuICAgICAgYXdhaXQgZHJpdmVyLnN0YXJ0QWN0aXZpdHkoJ3BrZycsICdhY3QnLCAnd3BrZycsICd3YWN0JywgJ2FjdCcsICdjYXQnLCAnZmxncycsICdvcHQnKTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAuY2FsbGVkV2l0aEV4YWN0bHkocGFyYW1zKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHVzZSBhcHBQYWNrYWdlIGFuZCBhcHBBY3Rpdml0eSBpZiBhcHBXYWl0UGFja2FnZSBhbmQgYXBwV2FpdEFjdGl2aXR5IGFyZSB1bmRlZmluZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBwYXJhbXMud2FpdFBrZyA9ICdwa2cnO1xuICAgICAgcGFyYW1zLndhaXRBY3Rpdml0eSA9ICdhY3QnO1xuICAgICAgcGFyYW1zLnN0b3BBcHAgPSB0cnVlO1xuICAgICAgYXdhaXQgZHJpdmVyLnN0YXJ0QWN0aXZpdHkoJ3BrZycsICdhY3QnLCBudWxsLCBudWxsLCAnYWN0JywgJ2NhdCcsICdmbGdzJywgJ29wdCcsIGZhbHNlKTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAuY2FsbGVkV2l0aEV4YWN0bHkocGFyYW1zKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdyZXNldCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHJlc2V0IGFwcCB2aWEgcmVpbnN0YWxsIGlmIGZ1bGxSZXNldCBpcyB0cnVlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLm9wdHMuZnVsbFJlc2V0ID0gdHJ1ZTtcbiAgICAgIGRyaXZlci5vcHRzLmFwcFBhY2thZ2UgPSAncGtnJztcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdzdGFydEFVVCcpLnJldHVybnMoJ2F1dCcpO1xuICAgICAgc2FuZGJveC5zdHViKGhlbHBlcnMsICdyZXNldEFwcCcpLnJldHVybnModW5kZWZpbmVkKTtcbiAgICAgIGF3YWl0IGRyaXZlci5yZXNldCgpLnNob3VsZC5ldmVudHVhbGx5LmJlLmVxdWFsKCdhdXQnKTtcbiAgICAgIGhlbHBlcnMucmVzZXRBcHAuY2FsbGVkV2l0aChkcml2ZXIuYWRiKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5zdGFydEFVVC5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZG8gZmFzdCByZXNldCBpZiBmdWxsUmVzZXQgaXMgZmFsc2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIub3B0cy5mdWxsUmVzZXQgPSBmYWxzZTtcbiAgICAgIGRyaXZlci5vcHRzLmFwcFBhY2thZ2UgPSAncGtnJztcbiAgICAgIHNhbmRib3guc3R1YihoZWxwZXJzLCAncmVzZXRBcHAnKS5yZXR1cm5zKHVuZGVmaW5lZCk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnc3RhcnRBVVQnKS5yZXR1cm5zKCdhdXQnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5yZXNldCgpLnNob3VsZC5ldmVudHVhbGx5LmJlLmVxdWFsKCdhdXQnKTtcbiAgICAgIGhlbHBlcnMucmVzZXRBcHAuY2FsbGVkV2l0aChkcml2ZXIuYWRiKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5zdGFydEFVVC5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgICAgZXhwZWN0KGRyaXZlci5jdXJDb250ZXh0KS50by5lcWwoJ05BVElWRV9BUFAnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdzdGFydEFVVCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHN0YXJ0IEFVVCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5vcHRzID0ge1xuICAgICAgICBhcHBQYWNrYWdlOiAncGtnJyxcbiAgICAgICAgYXBwQWN0aXZpdHk6ICdhY3QnLFxuICAgICAgICBpbnRlbnRBY3Rpb246ICdhY3RuJyxcbiAgICAgICAgaW50ZW50Q2F0ZWdvcnk6ICdjYXQnLFxuICAgICAgICBpbnRlbnRGbGFnczogJ2ZsZ3MnLFxuICAgICAgICBhcHBXYWl0UGFja2FnZTogJ3dwa2cnLFxuICAgICAgICBhcHBXYWl0QWN0aXZpdHk6ICd3YWN0JyxcbiAgICAgICAgYXBwV2FpdER1cmF0aW9uOiAnd2R1cicsXG4gICAgICAgIG9wdGlvbmFsSW50ZW50QXJndW1lbnRzOiAnb3B0JyxcbiAgICAgICAgdXNlclByb2ZpbGU6IDFcbiAgICAgIH07XG4gICAgICBsZXQgcGFyYW1zID0ge1xuICAgICAgICBwa2c6ICdwa2cnLFxuICAgICAgICBhY3Rpdml0eTogJ2FjdCcsXG4gICAgICAgIGFjdGlvbjogJ2FjdG4nLFxuICAgICAgICBjYXRlZ29yeTogJ2NhdCcsXG4gICAgICAgIGZsYWdzOiAnZmxncycsXG4gICAgICAgIHdhaXRQa2c6ICd3cGtnJyxcbiAgICAgICAgd2FpdEFjdGl2aXR5OiAnd2FjdCcsXG4gICAgICAgIHdhaXREdXJhdGlvbjogJ3dkdXInLFxuICAgICAgICBvcHRpb25hbEludGVudEFyZ3VtZW50czogJ29wdCcsXG4gICAgICAgIHN0b3BBcHA6IGZhbHNlLFxuICAgICAgICB1c2VyOiAxXG4gICAgICB9O1xuICAgICAgZHJpdmVyLm9wdHMuZG9udFN0b3BBcHBPblJlc2V0ID0gdHJ1ZTtcbiAgICAgIHBhcmFtcy5zdG9wQXBwID0gZmFsc2U7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ3N0YXJ0QXBwJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuc3RhcnRBVVQoKTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAuY2FsbGVkV2l0aEV4YWN0bHkocGFyYW1zKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdzZXRVcmwnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBzZXQgdXJsJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLm9wdHMgPSB7YXBwUGFja2FnZTogJ3BrZyd9O1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdGFydFVyaScpO1xuICAgICAgYXdhaXQgZHJpdmVyLnNldFVybCgndXJsJyk7XG4gICAgICBkcml2ZXIuYWRiLnN0YXJ0VXJpLmNhbGxlZFdpdGhFeGFjdGx5KCd1cmwnLCAncGtnJykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnY2xvc2VBcHAnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBjbG9zZSBhcHAnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIub3B0cyA9IHthcHBQYWNrYWdlOiAncGtnJ307XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2ZvcmNlU3RvcCcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmNsb3NlQXBwKCk7XG4gICAgICBkcml2ZXIuYWRiLmZvcmNlU3RvcC5jYWxsZWRXaXRoRXhhY3RseSgncGtnJykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0RGlzcGxheURlbnNpdHknLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIGRpc3BsYXkgZGVuc2l0eSBvZiBhIGRldmljZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwgPSAoKSA9PiB7IHJldHVybiAnMTIzJzsgfTtcbiAgICAgIChhd2FpdCBkcml2ZXIuZ2V0RGlzcGxheURlbnNpdHkoKSkuc2hvdWxkLmVxdWFsKDEyMyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIGRpc3BsYXkgZGVuc2l0eSBvZiBhbiBlbXVsYXRvcicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwgPSAoY21kKSA9PiB7XG4gICAgICAgIGxldCBqb2luZWRDbWQgPSBjbWQuam9pbignICcpO1xuICAgICAgICBpZiAoam9pbmVkQ21kLmluZGV4T2YoJ3JvLnNmJykgIT09IC0xKSB7XG4gICAgICAgICAgLy8gZGV2aWNlIHByb3BlcnR5IGxvb2sgdXBcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH0gZWxzZSBpZiAoam9pbmVkQ21kLmluZGV4T2YoJ3FlbXUuc2YnKSAhPT0gLTEpIHtcbiAgICAgICAgICAvLyBlbXVsYXRvciBwcm9wZXJ0eSBsb29rIHVwXG4gICAgICAgICAgcmV0dXJuICc0NTYnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH07XG4gICAgICAoYXdhaXQgZHJpdmVyLmdldERpc3BsYXlEZW5zaXR5KCkpLnNob3VsZC5lcXVhbCg0NTYpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGRpc3BsYXkgZGVuc2l0eSBwcm9wZXJ0eSBjYW5cXCd0IGJlIGZvdW5kJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbCA9ICgpID0+IHsgcmV0dXJuICcnOyB9O1xuICAgICAgYXdhaXQgZHJpdmVyLmdldERpc3BsYXlEZW5zaXR5KCkuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvRmFpbGVkIHRvIGdldCBkaXNwbGF5IGRlbnNpdHkgcHJvcGVydHkvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuZCBlcnJvciBpZiB0aGUgZGlzcGxheSBkZW5zaXR5IGlzIG5vdCBhIG51bWJlcicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwgPSAoKSA9PiB7IHJldHVybiAnYWJjJzsgfTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXREaXNwbGF5RGVuc2l0eSgpLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL0ZhaWxlZCB0byBnZXQgZGlzcGxheSBkZW5zaXR5IHByb3BlcnR5Lyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgncGFyc2VTdXJmYWNlTGluZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB2aXNpYmxlIHRydWUgaWYgdGhlIHN1cmZhY2UgaXMgdmlzaWJsZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHBhcnNlU3VyZmFjZUxpbmUoJ3Nob3duPXRydWUgcmVjdD0xIDEgMSAxJykuc2hvdWxkLmJlLmVxbCh7XG4gICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgIHg6IDEsXG4gICAgICAgIHk6IDEsXG4gICAgICAgIHdpZHRoOiAxLFxuICAgICAgICBoZWlnaHQ6IDFcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZpc2libGUgZmFsc2UgaWYgdGhlIHN1cmZhY2UgaXMgbm90IHZpc2libGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBwYXJzZVN1cmZhY2VMaW5lKCdzaG93bj1mYWxzZSByZWN0PTEgMSAxIDEnKS5zaG91bGQuYmUuZXFsKHtcbiAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHg6IDEsXG4gICAgICAgIHk6IDEsXG4gICAgICAgIHdpZHRoOiAxLFxuICAgICAgICBoZWlnaHQ6IDFcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRoZSBwYXJzZWQgc3VyZmFjZSBib3VuZHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBwYXJzZVN1cmZhY2VMaW5lKCdzaG93bj10cnVlIHJlY3Q9KDEuMCwyLjApIDMuMCB4IDQuMCcpLnNob3VsZC5iZS5lcWwoe1xuICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICB4OiAxLFxuICAgICAgICB5OiAyLFxuICAgICAgICB3aWR0aDogMyxcbiAgICAgICAgaGVpZ2h0OiA0XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gdGhlc2UgYXJlIHVzZWQgZm9yIGJvdGggcGFyc2VXaW5kb3dzIGFuZCBnZXRTeXN0ZW1CYXJzIHRlc3RzXG4gIGxldCB2YWxpZFdpbmRvd091dHB1dCA9IFtcbiAgICAnICBXaW5kb3cgIzEgRGVycCcsXG4gICAgJyAgICBzdHVmZicsXG4gICAgJyAgICAgIFN1cmZhY2U6IGRlcnAgc2hvd249ZmFsc2UgbGFsYWxhbGEgcmVjdD0oOS4wLDguMCkgNy4wIHggNi4wJyxcbiAgICAnICAgIG1vcmUgc3R1ZmYnLFxuICAgICcgIFdpbmRvdyAjMiBTdGF0dXNCYXInLFxuICAgICcgICAgYmxhaCBibGFoIGJsYWgnLFxuICAgICcgICAgICBTdXJmYWNlOiBibGFoIGJsYWggc2hvd249dHJ1ZSBibGFoIGJsYWggcmVjdD0oMS4wLDIuMCkgMy4wIHggNC4wJyxcbiAgICAnICAgIGJsYWggYmxhaCBibGFoJyxcbiAgICAnICBXaW5kb3cgIzMgTmF2aWdhdGlvbkJhcicsXG4gICAgJyAgICB3b21wIHdvbXAnLFxuICAgICcgICAgICBTdXJmYWNlOiBibGFoIGJsYWggc2hvd249ZmFsc2Ugd29tcCB3b21wIHJlY3Q9KDUuMCw2LjApIDUwLjAgeCA2MC4wJyxcbiAgICAnICAgIHF3ZXJ0eSBhc2QgenhjJ1xuICBdLmpvaW4oJ1xcbicpO1xuICBsZXQgdmFsaWRTeXN0ZW1CYXJzID0ge1xuICAgIHN0YXR1c0Jhcjoge3Zpc2libGU6IHRydWUsIHg6IDEsIHk6IDIsIHdpZHRoOiAzLCBoZWlnaHQ6IDR9LFxuICAgIG5hdmlnYXRpb25CYXI6IHt2aXNpYmxlOiBmYWxzZSwgeDogNSwgeTogNiwgd2lkdGg6IDUwLCBoZWlnaHQ6IDYwfVxuICB9O1xuXG4gIGRlc2NyaWJlKCdwYXJzZVdpbmRvd3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgc3RhdHVzIGJhciBpbmZvIHdhc25cXCd0IGZvdW5kJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZXhwZWN0KCgpID0+IHsgcGFyc2VXaW5kb3dzKCcnKTsgfSlcbiAgICAgICAgLnRvLnRocm93KEVycm9yLCAvRmFpbGVkIHRvIHBhcnNlIHN0YXR1cyBiYXIgaW5mb3JtYXRpb24uLyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgbmF2aWdhdGlvbiBiYXIgaW5mbyB3YXNuXFwndCBmb3VuZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB3aW5kb3dPdXRwdXQgPSBbXG4gICAgICAgICcgIFdpbmRvdyAjMSBTdGF0dXNCYXInLFxuICAgICAgICAnICAgIGJsYWggYmxhaCBibGFoJyxcbiAgICAgICAgJyAgICAgIFN1cmZhY2U6IGJsYWggYmxhaCBzaG93bj10cnVlIGJsYWggYmxhaCByZWN0PSgxLjAsMi4wKSAzLjAgeCA0LjAnLFxuICAgICAgICAnICAgIGJsYWggYmxhaCBibGFoJ1xuICAgICAgXS5qb2luKCdcXG4nKTtcbiAgICAgIGV4cGVjdCgoKSA9PiB7IHBhcnNlV2luZG93cyh3aW5kb3dPdXRwdXQpOyB9KVxuICAgICAgICAudG8udGhyb3coRXJyb3IsIC9GYWlsZWQgdG8gcGFyc2UgbmF2aWdhdGlvbiBiYXIgaW5mb3JtYXRpb24uLyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3RhdHVzIGFuZCBuYXZpZ2F0aW9uIGJhciBpbmZvIHdoZW4gYm90aCBhcmUgZ2l2ZW4nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBwYXJzZVdpbmRvd3ModmFsaWRXaW5kb3dPdXRwdXQpLnNob3VsZC5iZS5lcWwodmFsaWRTeXN0ZW1CYXJzKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRTeXN0ZW1CYXJzJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgdGhlcmVcXCdzIG5vIHdpbmRvdyBtYW5hZ2VyIG91dHB1dCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlciA9IG5ldyBBbmRyb2lkRHJpdmVyKCk7XG4gICAgICBkcml2ZXIuYWRiID0ge307XG4gICAgICBkcml2ZXIuYWRiLnNoZWxsID0gKCkgPT4geyByZXR1cm4gJyc7IH07XG4gICAgICBhd2FpdCBkcml2ZXIuZ2V0U3lzdGVtQmFycygpLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL0RpZCBub3QgZ2V0IHdpbmRvdyBtYW5hZ2VyIG91dHB1dC4vKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgcGFyc2VkIHN5c3RlbSBiYXIgaW5mbycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlciA9IG5ldyBBbmRyb2lkRHJpdmVyKCk7XG4gICAgICBkcml2ZXIuYWRiID0ge307XG4gICAgICBkcml2ZXIuYWRiLnNoZWxsID0gKCkgPT4geyByZXR1cm4gdmFsaWRXaW5kb3dPdXRwdXQ7IH07XG4gICAgICAoYXdhaXQgZHJpdmVyLmdldFN5c3RlbUJhcnMoKSkuc2hvdWxkLmJlLmVxbCh2YWxpZFN5c3RlbUJhcnMpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLi8uLiJ9
